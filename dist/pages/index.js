import e from"react";import s from"next/head.js";import{useEffect as d,useRef as p,useState as b}from"react";import{StreamingText as c}from"../components/StreamingText/index.js";import{useTextBuffer as v}from"../hooks/index.js";function h(){const r=p(null),[t,n]=b({name:"John"}),{buffer:m,done:a,refresh:f,cancel:u}=v({url:"/api/demo",throttle:100,method:"POST",data:t});console.log({buffer:m,done:a}),d(()=>{const o=r.current?.value;o&&n(l=>({...l,name:o}))},[]);const i=()=>{const o=r?.current?.value;o&&(n(l=>({...l,name:o})),f())};return e.createElement(e.Fragment,null,e.createElement(s,null,e.createElement("title",null,"OpenAI Completion Stream")),e.createElement("main",null,e.createElement("div",null,e.createElement("label",null,"Name"),e.createElement("input",{ref:r,defaultValue:t.name,placeholder:"Type a name here..."})),e.createElement("div",{className:"w-full max-w-md p-4 rounded-lg border-solid border-2 border-gray-400"},e.createElement(c,{buffer:m})),e.createElement("div",{className:"flex flex-row"},e.createElement("button",{className:"w-full",onClick:i},"Refresh"),e.createElement("button",{className:"w-full",onClick:u},"Cancel"))))}export{h as default};
