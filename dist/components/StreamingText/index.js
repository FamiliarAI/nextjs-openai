import r from"react";import{useEffect as x,useRef as T,useState as y}from"react";import{useTextBuffer as h}from"../../hooks/index.js";const S=({buffer:t,as:m="p",fade:s=600,...a})=>{const p=t.join(""),c=t.length===0||p.trim()==="",[e,o]=y(0),u=T(null),l=t.map((i,n)=>r.createElement("span",{style:{opacity:n<e?1:0},key:n},i));return x(()=>{e>=t.length&&o(t.length)},[t.length,e]),x(()=>{const i=u.current;if(!i)return;const n=i.getElementsByTagName("span");if(n.length<=e)return;const f=n[e];if(!f)return;const g=f.animate([{opacity:0},{opacity:1}],{duration:s,easing:"cubic-bezier(0.7, 0, 0.84, 0)"});g.onfinish=()=>{f.style.opacity="1"},o(e+1)},[t,s,e]),r.createElement(m,{ref:u,...a},c?r.createElement(r.Fragment,null,"Â­"):l)},O=({as:t,fade:m,url:s,throttle:a,data:p,method:c,...e})=>{const{buffer:o}=h({url:s,throttle:a,data:p,method:c});return r.createElement(S,{buffer:o,fade:m,as:t,...e})};export{S as StreamingText,O as StreamingTextURL};
